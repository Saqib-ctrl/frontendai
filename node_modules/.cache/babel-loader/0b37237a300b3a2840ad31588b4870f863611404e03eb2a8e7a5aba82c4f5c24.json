{"ast":null,"code":"import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";function App(){try{const[currentUser,setCurrentUser]=React.useState(null);const[isLoading,setIsLoading]=React.useState(true);const[currentPage,setCurrentPage]=React.useState(window.location.hash.slice(1)||'home');const[pageParams,setPageParams]=React.useState({});const[sidebarCollapsed,setSidebarCollapsed]=React.useState(false);React.useEffect(()=>{const checkAuth=async()=>{try{const user=getCurrentUser();setCurrentUser(user);}catch(error){console.error('Auth check failed:',error);}finally{setIsLoading(false);}};checkAuth();// Handle route changes\nconst handleRoute=()=>{const hash=window.location.hash.slice(1);const[page,params]=hash.split('?');setCurrentPage(page||'home');// Parse URL parameters\nif(params){const urlParams=new URLSearchParams(params);const paramObj={};for(const[key,value]of urlParams){paramObj[key]=value;}setPageParams(paramObj);}else{setPageParams({});}};window.addEventListener('hashchange',handleRoute);return()=>window.removeEventListener('hashchange',handleRoute);},[]);const renderPage=()=>{// Public pages accessible without login\nif(!currentUser&&['login','register','home','forgot-password'].includes(currentPage)){switch(currentPage){case'login':return/*#__PURE__*/_jsx(Login,{});case'register':return/*#__PURE__*/_jsx(Register,{});case'forgot-password':return/*#__PURE__*/_jsx(ForgotPassword,{});default:return/*#__PURE__*/_jsx(Home,{});}}// Redirect to login if not authenticated\nif(!currentUser){window.location.hash='login';return/*#__PURE__*/_jsx(Login,{});}// Common pages for all roles\nswitch(currentPage){case'dashboard':return/*#__PURE__*/_jsx(DashboardPage,{});case'ai':return/*#__PURE__*/_jsx(AI,{});case'messages':return/*#__PURE__*/_jsx(Messages,{});case'candidate':return/*#__PURE__*/_jsx(CandidateProfile,{candidateId:pageParams.id});case'employer':return/*#__PURE__*/_jsx(EmployerProfile,{employerId:pageParams.id});default:break;}// Role-specific pages\nconst rolePages={candidate:{resume:/*#__PURE__*/_jsx(Resume,{}),jobs:/*#__PURE__*/_jsx(Jobs,{}),applications:/*#__PURE__*/_jsx(Applications,{}),recommended:/*#__PURE__*/_jsx(RecommendedJobs,{})},employer:{candidates:/*#__PURE__*/_jsx(Candidates,{}),jobs:/*#__PURE__*/_jsx(Jobs,{})},admin:{candidates:/*#__PURE__*/_jsx(Candidates,{}),jobs:/*#__PURE__*/_jsx(Jobs,{}),analytics:/*#__PURE__*/_jsx(Admin,{}),adminai:/*#__PURE__*/_jsx(AdminAI,{})}};// Get pages for current role or fallback to candidate\nconst availablePages=rolePages[currentUser===null||currentUser===void 0?void 0:currentUser.role]||rolePages.candidate;// Return requested page or fallback to dashboard\nreturn availablePages[currentPage]||/*#__PURE__*/_jsx(DashboardPage,{});};if(isLoading){return/*#__PURE__*/_jsx(\"div\",{\"data-name\":\"loading-container\",className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsx(Loading,{})});}return/*#__PURE__*/_jsxs(\"div\",{\"data-name\":\"app-container\",className:\"main-container\",children:[/*#__PURE__*/_jsx(Header,{currentUser:currentUser,setCurrentUser:setCurrentUser}),/*#__PURE__*/_jsxs(\"div\",{\"data-name\":\"layout-wrapper\",className:\"layout-wrapper\",children:[currentUser&&/*#__PURE__*/_jsx(Sidebar,{currentUser:currentUser,currentPage:currentPage,onNavigate:setCurrentPage,collapsed:sidebarCollapsed,onToggleCollapse:()=>setSidebarCollapsed(!sidebarCollapsed)}),/*#__PURE__*/_jsxs(\"main\",{\"data-name\":\"main-content\",className:`main-content ${sidebarCollapsed?'sidebar-collapsed':''}`,children:[/*#__PURE__*/_jsx(\"div\",{className:\"content-area\",children:renderPage()}),/*#__PURE__*/_jsx(Footer,{className:sidebarCollapsed?'sidebar-collapsed':''})]})]})]});}catch(error){console.error('App render error:',error);reportError(error);return/*#__PURE__*/_jsx(\"div\",{\"data-name\":\"error-container\",className:\"flex items-center justify-center min-h-screen\",children:/*#__PURE__*/_jsx(ErrorMessage,{message:\"Something went wrong. Please try again later.\"})});}}export default App;","map":{"version":3,"names":["App","currentUser","setCurrentUser","React","useState","isLoading","setIsLoading","currentPage","setCurrentPage","window","location","hash","slice","pageParams","setPageParams","sidebarCollapsed","setSidebarCollapsed","useEffect","checkAuth","user","getCurrentUser","error","console","handleRoute","page","params","split","urlParams","URLSearchParams","paramObj","key","value","addEventListener","removeEventListener","renderPage","includes","_jsx","Login","Register","ForgotPassword","Home","DashboardPage","AI","Messages","CandidateProfile","candidateId","id","EmployerProfile","employerId","rolePages","candidate","resume","Resume","jobs","Jobs","applications","Applications","recommended","RecommendedJobs","employer","candidates","Candidates","admin","analytics","Admin","adminai","AdminAI","availablePages","role","className","children","Loading","_jsxs","Header","Sidebar","onNavigate","collapsed","onToggleCollapse","Footer","reportError","ErrorMessage","message"],"sources":["/workspaces/frontendai/src/App.js"],"sourcesContent":["function App() {\n    try {\n        const [currentUser, setCurrentUser] = React.useState(null);\n        const [isLoading, setIsLoading] = React.useState(true);\n        const [currentPage, setCurrentPage] = React.useState(window.location.hash.slice(1) || 'home');\n        const [pageParams, setPageParams] = React.useState({});\n        const [sidebarCollapsed, setSidebarCollapsed] = React.useState(false);\n\n        React.useEffect(() => {\n            const checkAuth = async () => {\n                try {\n                    const user = getCurrentUser();\n                    setCurrentUser(user);\n                } catch (error) {\n                    console.error('Auth check failed:', error);\n                } finally {\n                    setIsLoading(false);\n                }\n            };\n            \n            checkAuth();\n\n            // Handle route changes\n            const handleRoute = () => {\n                const hash = window.location.hash.slice(1);\n                const [page, params] = hash.split('?');\n                setCurrentPage(page || 'home');\n                \n                // Parse URL parameters\n                if (params) {\n                    const urlParams = new URLSearchParams(params);\n                    const paramObj = {};\n                    for (const [key, value] of urlParams) {\n                        paramObj[key] = value;\n                    }\n                    setPageParams(paramObj);\n                } else {\n                    setPageParams({});\n                }\n            };\n\n            window.addEventListener('hashchange', handleRoute);\n            return () => window.removeEventListener('hashchange', handleRoute);\n        }, []);\n\n        const renderPage = () => {\n            // Public pages accessible without login\n            if (!currentUser && ['login', 'register', 'home', 'forgot-password'].includes(currentPage)) {\n                switch (currentPage) {\n                    case 'login':\n                        return <Login />;\n                    case 'register':\n                        return <Register />;\n                    case 'forgot-password':\n                        return <ForgotPassword />;\n                    default:\n                        return <Home />;\n                }\n            }\n\n            // Redirect to login if not authenticated\n            if (!currentUser) {\n                window.location.hash = 'login';\n                return <Login />;\n            }\n\n            // Common pages for all roles\n            switch (currentPage) {\n                case 'dashboard':\n                    return <DashboardPage />;\n                case 'ai':\n                    return <AI />;\n                case 'messages':\n                    return <Messages />;\n                case 'candidate':\n                    return <CandidateProfile candidateId={pageParams.id} />;\n                case 'employer':\n                    return <EmployerProfile employerId={pageParams.id} />;\n                default:\n                    break;\n            }\n\n            // Role-specific pages\n            const rolePages = {\n                candidate: {\n                    resume: <Resume />,\n                    jobs: <Jobs />,\n                    applications: <Applications />,\n                    recommended: <RecommendedJobs />\n                },\n                employer: {\n                    candidates: <Candidates />,\n                    jobs: <Jobs />\n                },\n                admin: {\n                    candidates: <Candidates />,\n                    jobs: <Jobs />,\n                    analytics: <Admin />,\n                    adminai: <AdminAI />\n                }\n            };\n\n            // Get pages for current role or fallback to candidate\n            const availablePages = rolePages[currentUser?.role] || rolePages.candidate;\n            \n            // Return requested page or fallback to dashboard\n            return availablePages[currentPage] || <DashboardPage />;\n        };\n\n        if (isLoading) {\n            return (\n                <div data-name=\"loading-container\" className=\"flex items-center justify-center min-h-screen\">\n                    <Loading />\n                </div>\n            );\n        }\n\n        return (\n            <div data-name=\"app-container\" className=\"main-container\">\n                <Header currentUser={currentUser} setCurrentUser={setCurrentUser} />\n                <div data-name=\"layout-wrapper\" className=\"layout-wrapper\">\n                    {currentUser && (\n                        <Sidebar \n                            currentUser={currentUser} \n                            currentPage={currentPage}\n                            onNavigate={setCurrentPage}\n                            collapsed={sidebarCollapsed}\n                            onToggleCollapse={() => setSidebarCollapsed(!sidebarCollapsed)}\n                        />\n                    )}\n                    <main \n                        data-name=\"main-content\" \n                        className={`main-content ${sidebarCollapsed ? 'sidebar-collapsed' : ''}`}\n                    >\n                        <div className=\"content-area\">\n                            {renderPage()}\n                        </div>\n                        <Footer className={sidebarCollapsed ? 'sidebar-collapsed' : ''} />\n                    </main>\n                </div>\n            </div>\n        );\n    } catch (error) {\n        console.error('App render error:', error);\n        reportError(error);\n        return (\n            <div data-name=\"error-container\" className=\"flex items-center justify-center min-h-screen\">\n                <ErrorMessage message=\"Something went wrong. Please try again later.\" />\n            </div>\n        );\n    }\n}\n\nexport default App;\n\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}